---
import {
  getLangFromUrl,
  useTranslatedPath,
  useTranslations,
} from "../../../../data/i18n/utils";
import allProjects from "../../../../data/projects-list";
import Button from "../../atoms/Button.astro";
import Divider from "../../atoms/Divider.astro";
import TitlePage from "../../atoms/TitlePage.astro";
import ProjectsList from "../../molecules/ProjectsList.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

const projects = Object.keys(allProjects)
  .slice(0, 3)
  .map((key: string) => ({
    ...allProjects[key],
    key,
  }));
---

<TitlePage title={t("projects.recents")}
  ><a href={translatePath("/projects")}
    ><Button
      label={`${t("projects.see_all")} (${Object.keys(allProjects).length})`}
    />
  </a>
</TitlePage>
<Divider />
<ProjectsList projects={projects} />
